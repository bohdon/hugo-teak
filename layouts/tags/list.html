{{ define "main" }}

{{ if eq .Kind "term" }}

{{ if eq .Type "tags" }}
{{/* The tag being shown */}}
{{ $tag := .Site.Taxonomies.tags.Get .Title }}

<div class="box">
    <div class="tags has-addons">
        <a class="tag is-medium">{{ .Title }} ({{ $tag.Count }})</a>
        <a class="tag is-medium is-delete is-danger is-light" href=".."></a>
    </div>
</div>
{{ end }}

{{ end }}

{{ if .Content }}
<div class="content">
    {{ .Content }}
</div>
{{ end }}

{{ if eq .Kind "taxonomy" }}
{{/* list of tags */}}
<div class="box">
    <div class="tags">
        {{ range .Site.Taxonomies.tags.ByCount }}
        <a class="tag is-medium" href="{{ .Page.RelPermalink }}">{{ .Name }} ({{ .Count }})</a>
        {{ end }}
    </div>
</div>

{{ else }}
{{/* list of pages for the current tag */}}
<div class="columns is-multiline">

    {{ range .Pages }}

    {{ if eq .Type "links" }}
    <div class="column is-half">
        {{ partial "linkcard.html" . }}
    </div>
    {{ else }}
    <div class="column is-full">
        {{ partial "pagecard.html" . }}
    </div>
    {{ end }}

    {{ end }}

</div>
{{ end }}

{{ end }}